<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>新建xx表标准表-神峰科技管理后台</title>
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/xinjin.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="../js/html5shiv.min.js"></script>
    <script src="../js/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="../js/datapicker/jquery-ui.css">
    <link rel="stylesheet" href="../js/datapicker/style.css">
    <link rel="stylesheet" href="../select2/css/select2.css">
    <link rel="stylesheet" href="../js/swiper/swiper.min.css">
    <link rel="stylesheet" href="../css/xinjin-alert.css">



</head>
<body id="iframe">
<div id="wrapper">
    <!--右侧内容-->
    <div id="page-wrapper" class="newFix">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            <h3 class="panel-title xj-panel-title"><strong>新建xx表标准表</strong></h3>
                        </div>
                        <div class="newBtnLine clearfix">
                            <input type="hidden" name="draft" id="draft">
                            <button type="button" class="btn xj-btn-ft14 xj-btn-blue fa fa-check mgr20" onclick="draft.vaule=1;updata(1);">保存</button>
                            <!--<button type="button" class="btn xj-btn-ft14 xj-btn-blue fa fa-floppy-o mgr20" onclick="draft.vaule=2;updata(2);">提交</button>-->
                        </div>
                        <div class="panel-body">
                            <form role="form" class="form-horizontal" action="btn.html" id="ajaxform">
                                <h6 class="xj-border-bottom-gray xj-sup-title clearfix"><strong>基本信息</strong></h6>
                                <div class="newBg">
                                    <div class="newRow clearfix">
                                        <div class="newBiaoTi newWidth8"><div class="tabCell">标准代码：</div></div>
                                        <div class="newShuRu newWidth14 clearfix">
                                            <input id="materialId" type="text" class="form-control xj-form-control " name="" maxlength="20">
                                            <span  class="help-block"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3">*</div>

                                        <div class="newBiaoTi newWidth8"><div class="tabCell">工段：</div></div>
                                        <div class="newShuRu newWidth14 clearfix">
                                            <select  class="intsel form-control xj-form-control form-maps xj-sel js-example-basic-multiple" insert=0 >
                                                <option value="0">请选择</option>
                                                <option value="2">销售部</option>
                                                <option value="3">采购部</option>
                                            </select>
                                            <span  class="help-block"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3">*</div>

                                        <div class="newBiaoTi newWidth8"><div class="tabCell">比对执行表：</div></div>
                                        <div class="newShuRu newWidth39 clearfix">
                                            <select onchange="getdata(this.value)" class="intsel form-control xj-form-control form-maps xj-sel js-example-basic-multiple" insert=0 >
                                                <option value="0">请选择</option>
                                                <option value="136">销售部</option>
                                                <option value="34">采购部</option>
                                            </select>
                                            <span id="classificationTip" class="help-block" style="display: inline;"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3">*</div>


                                    </div>


                                    <div class="newRow clearfix">


                                        <div class="newBiaoTi newWidth8"><div class="tabCell">产品：</div></div>
                                        <div class="newShuRu newWidth39 clearfix">
                                            <select  class="intsel form-control xj-form-control form-maps xj-sel js-example-basic-multiple" >
                                                <option value="0">请选择</option>
                                                <option value="2">销售部</option>
                                                <option value="3">采购部</option>
                                            </select>
                                            <span  class="help-block" style="display: inline;"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3">*</div>

                                        <div class="newBiaoTi newWidth8"><div class="tabCell">产线：</div></div>
                                        <div class="newShuRu newWidth39 clearfix">
                                            <select  class="intsel form-control xj-form-control form-maps xj-sel js-example-basic-multiple" insert=0 >
                                                <option value="0">请选择</option>
                                                <option value="2">销售部</option>
                                                <option value="3">采购部</option>
                                            </select>
                                            <span  class="help-block" style="display: inline;"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3">*</div>


                                    </div>



                                    <div class="newRow clearfix">
                                        <div class="newBiaoTi newWidth8"><div class="tabCell">工序：</div></div>
                                        <div class="newShuRu newWidth14 clearfix">
                                            <input  type="text" class="form-control xj-form-control " name="" maxlength="20">
                                            <span  class="help-block"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3">*</div>

                                        <div class="newBiaoTi newWidth8"><div class="tabCell">状态：</div></div>
                                        <div class="newShuRu newWidth14 clearfix">
                                            <input type="hidden" value="1" name="status">
                                            <ul class="xj-state-switch">
                                                <li class="active"><a href="javascript:void(0)" noopen="true" class="fa fa-power-off">启用</a></li>
                                                <li><a href="javascript:void(0)" noopen="true" class="fa fa-ban">停用</a></li>
                                            </ul>
                                            <span  class="help-block"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3"></div>

                                        <div class="newBiaoTi newWidth8"><div class="tabCell">备注：</div></div>
                                        <div class="newShuRu newWidth39 clearfix">
                                            <textarea title="" id="memo" maxlength="200" class="form-control xj-form-control form-maps" name="memo" index="12"></textarea>
                            			<span id="memoTip" class="help-block">
                            			</span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3"></div>
                                    </div>

                                </div>

                                <div class="newBg">
                                    <div class="newRow clearfix">
                                        <div class="newBiaoTi newWidth8"><div class="tabCell">创建人：</div></div>
                                        <div class="newShuRu newWidth14 clearfix">
                                            <select class="intsel form-control xj-form-control form-maps xj-sel" insert=0>
                                                <option value="0">请选择</option>
                                                <option value="2">销售部</option>
                                                <option value="3">采购部</option>
                                            </select>
                                            <span  class="help-block"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3"></div>

                                        <div class="newBiaoTi newWidth8"><div class="tabCell">创建时间：</div></div>
                                        <div class="newShuRu newWidth14 clearfix">
                                            <input title="" type="text"  name="birthday" class="datepicker form-control xj-form-control form-maps" >
                                            <span  class="help-block"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3"></div>

                                        <div class="newBiaoTi newWidth8"><div class="tabCell">修改人：</div></div>
                                        <div class="newShuRu newWidth14 clearfix">
                                            <select class="intsel form-control xj-form-control form-maps xj-sel" insert=0>
                                                <option value="0">请选择</option>
                                                <option value="2">销售部</option>
                                                <option value="3">采购部</option>
                                            </select>
                                            <span  class="help-block"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3"></div>

                                        <div class="newBiaoTi newWidth8"><div class="tabCell">修改时间：</div></div>
                                        <div class="newShuRu newWidth14 clearfix">
                                            <input title="" type="text"  name="birthday" class="datepicker form-control xj-form-control form-maps" >
                                            <span  class="help-block"></span>
                                        </div>
                                        <div class="xj-text-danger xj-control-star newWidth3"></div>
                                    </div>
                                </div>

                                <h6 class="xj-border-bottom-gray xj-sup-title clearfix"><strong>比对属性明细</strong></h6>
                                <table class="table table-striped table-bordered table-hover xj-table text-center">
                                    <colgroup>
                                        <col class="col-xs-1">
                                        <col class="col-xs-11">
                                    </colgroup>
                                    <thead>
                                    <tr>
                                        <th class="text-center">操作</th>
                                        <th class="text-center">标准参数</th>
                                    </tr>
                                    </thead>
                                    <tbody id="listArea">

                                    </tbody>
                                    <tbody>
                                        <tr>
                                            <td colspan="2" class="text-left">
                                                <a id="add-line-1" onclick="creat_tr()" class="btn xj-btn" href="javascript:void(0);">添加</a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>



                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>


<script type="text/javascript" src="../js/jquery.min.js"></script>
<script type="text/javascript" src="../select2/js/select2.js"></script>
<script type="text/javascript" src="../js/bootstrap.js"></script>
<script>
    var baseData='';
    var del_callback = function(obj){};
    var attrChange_callback=function(){
        console.log(this)
    };
    function getdata(val){
        $.ajax({
            type: "GET",
            timeout: 60000,
            url:'/admin/standard/get_condition',
            data:{
                bills_id:val
            },
            success: function (obj) {
                if (typeof(obj) == "string") {
                    var obj = eval("(" + obj + ")");
                }
                baseData = obj;
                document.getElementById('listArea').innerHTML='';
            }
        })
    }
    function creat_tr(){
        if(baseData.length<1){
            alert('请选择比对执行表，或者等待数据传输。')
            return ;
        }
        var new_tr = document.createElement('tr');
        var td_1 = document.createElement('td');
        var div_5 = document.createElement('div');
        div_5.className ='col-lg-2';
        var td_3 = document.createElement('td');
        var div_row = document.createElement('div');
        div_row.className='row';
        var div_1 = document.createElement('div');
        div_1.className='col-lg-2 ';
        var div_2 = document.createElement('div');
        div_2.className='col-lg-2 ';
        var div_3 = document.createElement('div');
        div_3.className='col-lg-2 ';
        var div_4 = document.createElement('div');
        div_4.className='col-lg-2 ';


        var delet_a = document.createElement('a');
        delet_a.innerHTML = '删除';
        delet_a.onclick=function(){
            $(this).parents('tr').remove();
            del_callback(this);
        }

        var slect_1 = document.createElement('select');
        slect_1.className='glazeBox intsel form-control xj-form-control form-maps xj-sel';
        slect_1.setAttribute('insert','0');
        var int_opt = document.createElement('option');
        int_opt.value =0;
        int_opt.innerHTML = '请选择';
        slect_1.appendChild(int_opt);
        for(var i =0;i<baseData.length;i++){
            var opt = document.createElement('option');
            opt.value = baseData[i].field;
            opt.innerHTML = baseData[i].text;
            opt.className =  baseData[i].type;
            slect_1.appendChild(opt);
        }
        slect_1.onchange=attrChange_callback;

        var slect_2 = document.createElement('select');
        slect_2.innerHTML='<option value="0">请选择 </option><option value="3"> = </option> <option value="4"> <= </option> <option value="5"> < </option>';
        slect_2.className='glazeBox intsel form-control xj-form-control form-maps xj-sel';
        slect_2.setAttribute('insert','0');
        slect_2.name='min_chose[]';
        var input_1 = document.createElement('input');
        input_1.type='text';
        input_1.name='min[]';
        input_1.className='bizhongLeft form-control xj-form-control';
        var slect_3 = document.createElement('select');
        slect_3.innerHTML='<option value="0">请选择 </option> <option value="3"> = </option><option value="2"> <= </option> <option value="1"> < </option>';
        slect_3.setAttribute('insert','0');
        slect_3.className='glazeBox intsel form-control xj-form-control form-maps xj-sel';
        slect_3.name='max_chose[]';
        var input_2 = document.createElement('input');
        input_2.type='text';
        input_2.name='max[]';
        input_2.className='bizhongLeft form-control xj-form-control';

        td_1.appendChild(delet_a);
        td_1.appendChild(delet_a);


        div_1.appendChild(slect_2);
        div_2.appendChild(input_1);
        div_5.appendChild(slect_1);
        div_3.appendChild(slect_3);
        div_4.appendChild(input_2);

        td_3.appendChild(div_2)
        td_3.appendChild(div_1)
        td_3.appendChild(div_5)
        td_3.appendChild(div_3)
        td_3.appendChild(div_4)
        new_tr.appendChild(td_1);
        new_tr.appendChild(td_3);
        document.getElementById('listArea').appendChild(new_tr);
        $('.intsel').select2();
    }
</script>
</body>
</html>
